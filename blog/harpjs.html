<!DOCTYPE HTML>
<html lang="ru">
	
	<head>
	<meta charset="utf-8">
	
		
	
	
	
	<title>Rooc :: Блог :: HarpJs</title>
	<meta name="description" content="Блог веб-разработчика, front-end, CSS3, HTML, HTML5, javascript">
	<meta name="keywords" content="harpjs статический генератор сайтов">
	<meta name="author" content="rooc">
	<meta name="viewport" content="width=device-width">
	<link rel="icon" href="/assets/img/favicon.png">
	<link href='http://fonts.googleapis.com/css?family=PT+Serif:400italic&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/assets/css/styles.css">
</head>

	<body>
		<div class="l-header">
	<div class="l-sitewidth">
		<a href="/" class="logo">Rooc</a>
		<nav>
	<ul class="nav">
		
		<li class="nav-item">
			<a href="/">Блог</a>
		</li>
		
		<li class="nav-item">
			<a href="/archive/">Архив</a>
		</li>
		
		<li class="nav-item">
			<a href="/links/">Полезное</a>
		</li>
		
	</ul>
</nav>
	</div>
</div>
		<div class="l-content">
			<div class="l-sitewidth">
				<div class="l-article">
					<div class="l-space">
						<div class="social">
	<a href="https://twitter.com/share" class="social-link" data-via="rooczebra" data-count="none"><i class="ifont--twitter"></i></a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.async=true;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
	<!-- <a href="https://twitter.com/share" class="social-link" data-via="rooczebra" data-count="none"><i class="icon-font--facebookSquared"></i></a> -->
</div>
						<h1>HarpJs</h1>
						<div class="meta">
	<span class="meta-date">
		Январь 21, 2014
	</span>
	&nbsp;||&nbsp;
	<span class="meta-tags">
		
			
			<a href="/tags/kak-to-tak.html">kak-to-tak</a>
		
	</span>
	
	&nbsp;||&nbsp;
	<span class="meta-comments">
		<a href="#disqus_thread" data-disqus-identifier="harpjs-disqus">комментарии</a>
	</span>
</div>
						<p>Статические генераторы стали модной темой, их появилось <a href="http://staticsitegenerators.net/">много</a>. Раз в месяц мне попадается статья типа - <a href="http://joefleming.net/posts/wordpress-out-docpad-in/">Как я перешел от вордпресса к статике</a>.<!-- more --></p>
<p>Я начал использовать статические генераторы просто как инструмент для верстки, на этапе превращения дизайнерского макета в статические html, css, js. Эта верстка потом идет дальше к программерам или еще куда. Это удобно потому что у тебя в распоряжении сразу приятные мелочи типа препроцессинг стилей, инклуды. Тот же CoffeeScript например, если вы им пользуетесь. Сначала я пробовал пользоваться для этих целей грантом, но стало не хватать возможностей, типа метаданные для страниц. Хотя это можно каким то боком сделать, скажем, с помощью Jade, но это не так удобно как это бывает в статических генераторах. Возможно я не прав и все это можно сделать при помощи <a href="http://gruntjs.com/">Grunt</a> или <a href="http://gulpjs.com/">Gulp</a>.</p>
<p>Первым генератором которым я пользовался более-менее продолжительно был Docpad. Очень неплохой генератор, супернавороченный, с тонной плагинов и хорошим сообществом. В какой то момент у меня появилась бага, которую я не мог разрешить. Она была очень надоедливая, и решил посмотреть другие генераторы. Ничего плохого в адресс докпада сказать не хочу, он <a href="http://emmet.io/blog/docpad/">хороший</a>.</p>
<!-- rss -->
<p>Harp сразу же удивил тем как он просто устроен. Можно не делать никаких конфигураций, нарисовал три файла в папке, запустил сервер и работаешь. Пользоваться я им стал не сразу, сначала просто почитал документацию. И сразу хочу им нарисовать жирный плюс за отличную <a href="http://harpjs.com/docs/">доку</a>, все что надо находится быстро, обьясняется просто. </p>
<p><a href="http://harpjs.com/"><strong>HarpJs</strong></a> это статический сервер со встроенным препроцессингом (The static web server with built-in preprocessing), умеет процессить Less, Stylus, Sass, Jade, Coffee. Я думаю назван он именно так намеренно, а не просто например - статический генератор сайтов, потому что Harp можно использовать не только для генерации статики. Можно скажем просто в проекте запустить и пользоваться как сервером, можно в ваше нод-приложение подключить и <a href="http://harpjs.com/docs/environment/lib">использовать для процессинга</a> например стилуса.</p>
<p>Как с ним начать работать отлично обьясняется в документации, у меня до начала работы с ним заняло пару часов чтения доки. Действительно очень просто.</p>
<p>Возможности которые вы имеете с harp:</p>
<ul>
<li>Прозрачный процессинг плюшек - styl, coffee, jade, ejs, sass, less</li>
<li>Глобальные метаданные для всего сайта</li>
<li>Метаданные для конкретных страниц, все что придумаете - от даты до тегов, ключевые слова и так далее</li>
<li>Инклуды с возможностью передачи в них данных</li>
<li>Сервер который можно использовать отдельно от возможностей harp, например просто запустить в нужной папке </li>
<li>Компиляция из коммандной строки когда закончили работу и хотите получить кучку конечных файлов</li>
</ul>
<p>Вроде бы немного, но сделать с этим можно довольно много всякого. Этот сайт сделан на харпе, можете посмотреть <a href="https://github.com/rooc/rooc.me">исходники</a> если интересно. Приведу пример как сделан в сайдбаре вывод недавних записей.</p>
<pre><code class="language-ejs">&lt;h5&gt;Недавно&lt;/h5&gt;
&lt;ul class=&quot;list-simple c-small&quot;&gt;
  &lt;% 
    /* latest 5 post */
    var recent = [], i = 6
    if (category == &quot;blog&quot;) {
      var data = public.blog._data
      var path = &quot;/blog/&quot;
    }else{
      var data = public.folio._data
      var path = &quot;/folio/&quot;
    };
    for(var slug in data){
      if (typeof(data[slug].tags) !== &#39;undefined&#39; &amp;&amp; data[slug].published ) {
        recent.push([slug, data[slug].date])
      }
    };
    /* sorting by date */
    recent.sort(function(a,b){
      return new Date(b[1]) - new Date(a[1])
    });
    recent = recent.slice(0,i)
    /* removing latest post for the index page */
    if (current.path == &quot;index&quot;) {
      recent = recent.slice(1,i)
    }
  %&gt;
  &lt;%/* displays latest 5 posts */ %&gt;
  &lt;%  recent.forEach( function (slug) {  %&gt;
    &lt;%  if (current.source != slug[0]) { %&gt;
      &lt;li&gt;&lt;a href=&quot;&lt;%= path + slug[0] %&gt;.html&quot; class=&quot;c-link--sidebar&quot;&gt;&lt;%= data[slug[0]].title %&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;% } %&gt;
  &lt;% }); %&gt;
&lt;/ul&gt;
</code></pre>
<p>Пример записи из файла _blog/data.json</p>
<pre><code class="language-json">&quot;harpjs&quot;: {
    &quot;title&quot;: &quot;HarpJs&quot;,
    &quot;date&quot;: &quot;2014-01-21&quot;,
    &quot;postdate&quot;: &quot;Январь 21, 2014&quot;,
    &quot;keywords&quot;: &quot;harpjs статический генератор сайтов&quot;,
    &quot;disqus&quot;: &quot;harpjs-disqus&quot;,
    &quot;tags&quot;: [&quot;kak-to-tak&quot;],
    &quot;published&quot;: false
  },
  ...
</code></pre>
<p>У меня есть два типа постов - блог и фолио, когда я делаю инклуд сайдбара я передаю категорию.</p>
<pre><code class="language-ejs">&lt;%- partial(&quot;../_inc/html/l-sidebar&quot;, {&quot;category&quot;: &quot;blog&quot;}) %&gt;
</code></pre>
<p>Это означает что у меня есть отдельный layout для постов и для фолио.</p>
<pre><code class="language-js">if (category == &quot;blog&quot;) { ...
</code></pre>
<p>Проверяю мы в блоге или в портфолио.<br>Метаданные из файла <code>_data.json</code> получаем таким образом:</p>
<pre><code class="language-js">var data = public.blog._data
</code></pre>
<p><code>blog</code> - это имя папки в которой лежат посты.</p>
<pre><code class="language-js">if (typeof(data[slug].tags) !== &#39;undefined&#39; &amp;&amp; data[slug].published )
</code></pre>
<p>Проверяю чтобы в метаданных было свойство tags, так я отсеиваю всякие другие вспомогательные страницы, например индекс в портфолио в которой список работ. <code>published</code> - отсеиваю страницы которые пока не закончены.</p>
<p><code>slug</code> - это обьект в <code>public.blog._data</code> и одновременно это имя соотвествующего файла с контентом.</p>
<p>Короче говоря дальше обычный javascript. Ну и делать с этим можно все что позволяет js и фантазия.</p>
<p>К примеру если получить контент страницы при помощи partial: </p>
<pre><code class="language-ejs">&lt;% var mypost = partial(&quot;mypost&quot;); %&gt;
</code></pre>
<p>в котором есть комментарий - <code>&lt;!-- more --&gt;</code>, то можно обрезать и получить цитату</p>
<pre><code class="language-ejs">&lt;%- mypost.split(&quot;&lt;!-- more --&gt;&quot;)[0]; %&gt;
</code></pre>
<p>Плюс ко всему могу добавить что авторы очень отзывчивы и реагируют на вопросы или замечания быстро и по делу.</p>
<p>Само собой к харпу уже есть заготовки, вот пара которые мне понравились - <a href="https://github.com/rosshj/baseline">baseline</a>, <a href="https://github.com/kennethormandy/hb-casper">casper</a>.</p>
					</div>
					
						<div class="l-space l-box l-line">
	<div id="disqus_thread"></div>
</div>

<script>
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'roocblog';
	var disqus_identifier = 'harpjs-disqus';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>

<noscript>
	Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

<a href="http://disqus.com" class="dsq-brlink">
	comments powered by 
	<span class="logo-disqus">Disqus</span>
</a>
					
				</div>
				<div class="l-sidebar">
					<div class="l-space-l l-box l-line" rel="recent">
	<h5>Недавно</h5>
	<ul class="list--simple t-size-s">
		
		
		
			
				<li><a href="/blog/attribute-modules.html" class="t-link--sidebar">Модульный CSS и селекторы атрибутов</a></li>
			
		
			
				<li><a href="/blog/using-svg.html" class="t-link--sidebar">Основы работы с SVG</a></li>
			
		
			
				<li><a href="/blog/buttons.html" class="t-link--sidebar">Странный button</a></li>
			
		
			
				<li><a href="/blog/oocss-utils.html" class="t-link--sidebar">OOCSS. Утилиты</a></li>
			
		
			
		
			
				<li><a href="/blog/todos.html" class="t-link--sidebar">Планировщики</a></li>
			
		
	</ul>
</div>

<div class="l-space-l l-box l-line" rel="tags">
	<h5>Теги</h5>
	<ul class="list--tags t-size-s">
		
		
			
				
					
						
					
				
					
						
					
				
					
						
					
				
			
		
			
				
					
				
					
						
					
				
					
				
			
		
			
				
					
				
					
						
					
				
			
		
			
				
					
				
			
		
			
				
					
						
					
				
			
		
			
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
					
						
					
				
			
		
			
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
					
						
					
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
					
				
			
		
			
				
					
				
					
				
			
		
			
				
					
				
					
				
			
		
			
				
					
				
					
				
			
		
			
				
					
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
			
		
			
				
					
				
					
						
					
				
			
		
			
				
					
				
			
		
		<!-- tag listing -->
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
			
			<li class="list--tags-item">
				<a href="/tags/css.html">css</a>
			</li>
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
			
			<li class="list--tags-item">
				<a href="/tags/oocss.html">oocss</a>
			</li>
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
			
			<li class="list--tags-item">
				<a href="/tags/translation.html">translation</a>
			</li>
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
			
			<li class="list--tags-item">
				<a href="/tags/svg.html">svg</a>
			</li>
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
			
			<li class="list--tags-item">
				<a href="/tags/layout.html">layout</a>
			</li>
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
					
				
			
			<li class="list--tags-item--active">
				<a href="/tags/kak-to-tak.html">kak-to-tak</a>
			</li>
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
			
			<li class="list--tags-item">
				<a href="/tags/gradient.html">gradient</a>
			</li>
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
			
			<li class="list--tags-item">
				<a href="/tags/form.html">form</a>
			</li>
		
			<!-- highlighting tags in current document -->
			<!-- checking if current page is not tag page -->
			
			 
				
			
			
			
				
			
			<li class="list--tags-item">
				<a href="/tags/font.html">font</a>
			</li>
		
	</ul>
</div>

<div class="l-space-l l-box l-line" rel="rss">
	<h5>RSS</h5>
	<ul class="list--simple t-size-s">
		<li>
			<a href="/posts.xml" class="t-link--sidebar">Блог</a>
		</li>
		<li>
			<a href="/folio.xml" class="t-link--sidebar">Фолио</a>
		</li>
	</ul>
</div>


				</div>
			</div>
			<div class="l-footer">
	<div class="l-sitewidth">
		<div class="l-space l-box l-line">
			Блог веб разработчика. В вебе с 2000 года.
			<a href="https://twitter.com/rooczebra/">Twitter</a>
		</div>
		<div class="l-space">
			&copy; Rooc 2014 | Никаких прав не защищено. Сделано на <a href='http://harpjs.com/'>Harpjs</a>
		</div>
	</div>
</div>
			
				<script type="text/javascript">
var disqus_shortname = 'roocblog';
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
				<script>

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-81406656-1', 'auto');
  ga('send', 'pageview');

</script>

			
		</div>
		

		<script src="/assets/js/bundle.js"></script>
	</body>

</html>